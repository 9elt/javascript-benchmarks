#!/bin/bash

# echo benchmark results
print_results() {
    echo -e "\nresults:\n"

    for ((i=0; i < ${#NAMES[@]}; i++))
    do
        echo "$( cyan ${NAMES[$i]} ) -> $( yellow $( time_unit ${MEANS[$i]} )) (std. $( time_unit ${STDS[$i]} ))"
    done

    echo ""
}

# generate the readme file contents
generate_readme() {
    echo "## ${BENCHMARK_NAME^}"

    if [[ $DESCRIPTION ]]
    then
        echo -e "$DESCRIPTION"
    fi

    echo "<table><thead><tr><th>tested code</th><th>result <sub><sup>($ITERATIONS times)</sup></sub></th><th>std <sub><sup>($RUNS samples)</sup></sub></th></tr></thead><tbody>"

    for ((i=0; i < ${#NAMES[@]}; i++))
    do
        NEXT=$(( $i + 1 ))
        echo -e "<tr></tr><tr><td>\n\n[**${NAMES[$i]}**](/${JS_FILES[$NEXT]})\n\n\`\`\`javascript\n$( cat ${JS_FILES[$NEXT]} )\n\`\`\`\n\n</td><td><b>$( time_unit ${MEANS[$i]} )</b></td><td>$( time_unit ${STDS[$i]} )</td></tr>"
    done

    echo -e "</tbody></table>\n<sub>system<br><b>Node: </b> $NODE_VERSION <br><b>CPU: </b>$CPU_INFO</sub>"
}
