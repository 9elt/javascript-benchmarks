#!/bin/bash

# dir_exists_or_exit() {
#     if [[ ! -d "$1" ]]
#     then
#         echo "$1 directory does not exist" 
#         exit 1
#     fi
# }

load_config_or_exit() {
    if [[ ! -f "$1/config" ]]
    then
        echo "missing config in $1" 
        exit 1
    else
        echo "$1/config"
    fi
}

available_code_or_exit() {
    if [[ ! -f "$1/.code/simple.js" ]] ||
    [[ ! -f "$1/.code/realistic.js" ]] || 
    [[ ! -f "$1/.code/edge-case.js" ]]
    then
        echo "missing config in $1" 
        exit 1
    fi
}

load_available() {
    cat "$1/.code/$2.js"
}

space() {
    echo "$1" | tr "-" "$2"
}

parse_filename() {
    CHAR=" "

    if [[ "$2" ]]
    then
        CHAR="$2"
    fi

    echo "$1" | sed -r "s/.+\/(.+)\..+/\1/"  | tr "-" "$CHAR"
}

parse_dirname() {
    echo $(basename "$1")
}

# colors
black() {
    echo -ne "\x1b[1;90m${@}\x1b[0m"
}

cyan() {
    echo -ne "\x1b[1;38;5;39m${@}\x1b[0m"
}

green() {
    echo -ne "\x1b[1;38;5;25m${@}\x1b[0m"
}

yellow() {
    echo -ne "\x1b[1;33m${@}\x1b[0m"
}

bold() {
    echo -ne "\x1b[1m${@}\x1b[0m"
}

gray() {
    echo -ne "\x1b[1;38;5;244m${@}\x1b[0m"
}

# progress indicator

# $1 => snippet name
# $2 => version
show_progress() {
    if [[ "$2" = "simple" ]]
    then

        echo -ne "> $( yellow "$1" ) > $( yellow "[simple]" ) $( black "[realistic]" ) $( black "[edge case]" )\\r"

    elif [[ "$2" = "realistic" ]]
    then

        echo -ne "> $( yellow "$1" ) > $( cyan "[simple]" ) $( yellow "[realistic]" ) $( black "[edge case]" )\\r"

    elif [[ "$2" = "edge-case" ]]
    then

        echo -ne "> $( yellow "$1" ) > $( cyan "[simple]" ) $( cyan "[realistic]" ) $( yellow "[edge case]" )\\r"

    else

        echo -ne "> $( gray "$1 >" ) $( green "[simple]" ) $( green "[realistic]" ) $( green "[edge case]" )\\r"
        echo ""

    fi
}
